<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>rest-tutorial by DebbieRoycroft</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">rest-tutorial</h1>
      <h2 class="project-tagline">Instructions for REST with Spring Boot session - Manchester Java Community April 2015</h2>
      <a href="https://github.com/DebbieRoycroft/rest-tutorial" class="btn">View on GitHub</a>
      <a href="https://github.com/DebbieRoycroft/rest-tutorial/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/DebbieRoycroft/rest-tutorial/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>This tutorial introduces Spring Boot to build a rest server and a client for that interface.</p>

<p>We're going to build a small sample application using Spring Boot. The application is for a leisure centre that wants to be able to show everyone the classes it offers and let its staff edit those classes</p>

<h3>
<a id="step-1-set-up-the-project" class="anchor" href="#step-1-set-up-the-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Set up the project</h3>

<p>In Eclipse, if you have Spring Tool Suite (STS) plugin installed, you can start a new spring starter project:
<img src="./screenshots/newproject.png" alt=""></p>

<p>Set up details of the project like this - we're using Java 1.8, and Maven to build We're just going to select actuator and web for now, we can add more capabilities later on by editing the Maven pom.xml file.
<img src="./screenshots/springstarter.png" alt=""></p>

<p>We can just click on 'Finish' now, and we will get a zip file downloaded with our new project in, which Eclipse imports automatically. If you're not using Eclipse, or if you don't have the STS plugin you can still get a .zip starter project from <a href="https://start.spring.io/">The Spring Initializr website</a>.  Once the .zip project has been imported, it should look something like this:
<img src="./screenshots/timetable-step0.png" alt=""></p>

<p>Believe it or not we can already run this up and it will do things...Launch it in Eclipse
<img src="./screenshots/run-as-springboot.png" alt=""></p>

<p>Now in a browser navigate to http://localhost:8080/health</p>

<p>Hopefully you'll see something like this:</p>

<p><img src="./screenshots/health-api.png" alt=""></p>

<p>Spring boot actuator has set up a number of URL endpoints automatically. 'health' is one of them. You can see the others when in the console within the IDE (I've shortened the output lines a bit!):</p>

<pre><code>... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/beans],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/env/{name:.*}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/env],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/health],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/metrics/{name:.*}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/metrics],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/configprops],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/dump],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/info],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/autoconfig],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/mappings],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/shutdown],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
... o.s.b.a.e.mvc.EndpointHandlerMapping : Mapped "{[/trace],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" ...
</code></pre>

<p>You can try out some of the others to see what they produce.</p>

<p>Full source code for this step is <a href="https://github.com/DebbieRoycroft/rest-tutorial/tree/step-1">here</a></p>

<h3>
<a id="step-2-add-a-simple-rest-endpoint" class="anchor" href="#step-2-add-a-simple-rest-endpoint" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Add a simple REST endpoint</h3>

<p>OK. So far so good, let's add some of our own code now.</p>

<p>For the REST service, we need two classes, the controller class that tells Spring what function will handle which URL/method and a data model class.</p>

<p>I'm going to put the data model classes into their own package just to help keep things tidy, so I added timetable.model. Within that package, I created a simple data model class <code>Event</code>:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable.model</span>; 

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Event</span> { 
    <span class="pl-k">private</span> <span class="pl-smi">Long</span> id; 
    <span class="pl-k">private</span> <span class="pl-smi">String</span> title; 

    <span class="pl-k">public</span> <span class="pl-en">Event</span>(<span class="pl-smi">Long</span> <span class="pl-v">id</span>, <span class="pl-smi">String</span> <span class="pl-v">title</span>) { 
        <span class="pl-v">this</span><span class="pl-k">.</span>id <span class="pl-k">=</span> id; 
        <span class="pl-v">this</span><span class="pl-k">.</span>title <span class="pl-k">=</span> title; 
    } 

    <span class="pl-k">public</span> <span class="pl-smi">Long</span> <span class="pl-en">getId</span>() { 
        <span class="pl-k">return</span> id; 
    } 

    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getTitle</span>() { 
        <span class="pl-k">return</span> title; 
    } 

}</pre></div>

<p>We don't need any annotations on this class, or anything else to tell Spring how to handle it</p>

<p>Now we need a controller class</p>

<p>First of all we'll just add an API to return all events, this will be a GET method call to /timetable and will return a list of Events</p>

<p>Here's what it looks like (this is in the timetable package)</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable</span>; 

<span class="pl-k">import</span> <span class="pl-smi">java.util.ArrayList</span>; 
<span class="pl-k">import</span> <span class="pl-smi">java.util.List</span>; 

<span class="pl-k">import</span> <span class="pl-smi">org.springframework.stereotype.Controller</span>; 
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.web.bind.annotation.RequestMapping</span>; 
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.web.bind.annotation.RequestMethod</span>; 
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.web.bind.annotation.ResponseBody</span>; 

<span class="pl-k">import</span> <span class="pl-smi">timetable.model.Event</span>; 

@<span class="pl-smi">Controller</span> 
@RequestMapping(<span class="pl-s"><span class="pl-pds">"</span>/timetable<span class="pl-pds">"</span></span>) 
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">TimetableController</span> { 

    <span class="pl-k">@RequestMapping</span>(<span class="pl-c1">method</span><span class="pl-k">=</span><span class="pl-smi">RequestMethod</span><span class="pl-c1"><span class="pl-k">.</span>GET</span>) 
    <span class="pl-k">public</span> @<span class="pl-smi">ResponseBody</span> <span class="pl-k">List&lt;<span class="pl-smi">Event</span>&gt;</span> <span class="pl-en">getEvents</span>(){ 
        <span class="pl-k">List&lt;<span class="pl-smi">Event</span>&gt;</span> events <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">ArrayList&lt;&gt;</span>(); 
        events<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-smi">Event</span>(<span class="pl-c1">1L</span>,<span class="pl-s"><span class="pl-pds">"</span>Yoga<span class="pl-pds">"</span></span>)); 
        events<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-smi">Event</span>(<span class="pl-c1">2L</span>,<span class="pl-s"><span class="pl-pds">"</span>Boxercise<span class="pl-pds">"</span></span>)); 
        <span class="pl-k">return</span> events;         
    } 
}</pre></div>

<p>The <code>@Controller</code> annotation tells Spring this is a Controller- it's mapping some endpoints.</p>

<p>The <code>@RequestMapping</code> above the class definition gives the root mapping- so all calls to (in our case) http://localhost:8080/timetable will look in here to be processed</p>

<p>The <code>@RequestMapping</code> above the <code>getEvents()</code> method tells Spring this is the method to use for a GET call, and the <code>@ResponseBody</code> annotation before the return type is very important- this tells Spring we want it to send back the body data as it is, we don't have a view defined (the same <code>RequestMapping</code> annotations get used for Spring MVC where Spring would expect to find a view class mapped). Miss it off and you'll get an exception when you try to make your API request</p>

<p>For now, the body of the method just creates a hard-wired List and returns it</p>

<p>Save it all and run it back up (Eclipse should autobuild it for you on saving)</p>

<p>In the console you should be able to see the new endpoint '/timetable' mapped:</p>

<pre><code>Mapped "{[/timetable],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.util.List timetable.TimetableController.getEvents()
</code></pre>

<p>Back in the browser http://localhost:8080/timetable should give you a string of JSON something like this:</p>

<pre><code>[{"id":1,"title":"Yoga"},{"id":2,"title":"Boxercise"}]
</code></pre>

<p>Full source code for this step is <a href="https://github.com/DebbieRoycroft/rest-tutorial/tree/step-2">here</a></p>

<h3>
<a id="step-3-add-in-jpa" class="anchor" href="#step-3-add-in-jpa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: Add in JPA</h3>

<p>We will need implement some methods for the Event resource, these will use the URL http://localhost:8080/timetable/event</p>

<p>But before we do that, we will refactor the Event object slightly, so that we use JPA persistence, and we'll extend the object a bit so that it can represent the data a bit better</p>

<p>We need to add some dependencies to the pom.xml file inside the <code>&lt;dependencies&gt;</code> tag:</p>

<div class="highlight highlight-xml"><pre>  &lt;<span class="pl-ent">dependency</span>&gt; 
    &lt;<span class="pl-ent">groupId</span>&gt;com.h2database&lt;/<span class="pl-ent">groupId</span>&gt; 
    &lt;<span class="pl-ent">artifactId</span>&gt;h2&lt;/<span class="pl-ent">artifactId</span>&gt; 
  &lt;/<span class="pl-ent">dependency</span>&gt; 
  &lt;<span class="pl-ent">dependency</span>&gt; 
    &lt;<span class="pl-ent">groupId</span>&gt;org.springframework.boot&lt;/<span class="pl-ent">groupId</span>&gt; 
    &lt;<span class="pl-ent">artifactId</span>&gt;spring-boot-starter-data-jpa&lt;/<span class="pl-ent">artifactId</span>&gt; 
  &lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<p>This gives us the spring data JPA libraries and the h2 in memory database. You could use another database such as MongoDB or MySQL</p>

<p>Now we'll change <code>Event</code></p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable.model</span>;

<span class="pl-k">import</span> <span class="pl-smi">javax.persistence.Entity</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.persistence.GeneratedValue</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.persistence.Id</span>;

@<span class="pl-smi">Entity</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Event</span> {
    <span class="pl-k">@Id</span>
    <span class="pl-k">@GeneratedValue</span>
    <span class="pl-k">private</span> <span class="pl-smi">Long</span> id;
    <span class="pl-k">private</span> <span class="pl-smi">String</span> title;
    <span class="pl-k">private</span> <span class="pl-smi">Integer</span> day;
    <span class="pl-k">private</span> <span class="pl-smi">String</span> startTime;
    <span class="pl-k">private</span> <span class="pl-smi">String</span> endTime;

    <span class="pl-k">public</span> <span class="pl-en">Event</span>() {}

    <span class="pl-k">public</span> <span class="pl-en">Event</span>(<span class="pl-smi">String</span> <span class="pl-v">title</span>, <span class="pl-smi">Integer</span> <span class="pl-v">day</span>, <span class="pl-smi">String</span> <span class="pl-v">startTime</span>, <span class="pl-smi">String</span> <span class="pl-v">endTime</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>title <span class="pl-k">=</span> title;
        <span class="pl-v">this</span><span class="pl-k">.</span>day <span class="pl-k">=</span> day;
        <span class="pl-v">this</span><span class="pl-k">.</span>startTime <span class="pl-k">=</span> startTime;
        <span class="pl-v">this</span><span class="pl-k">.</span>endTime <span class="pl-k">=</span> endTime;
    }

    <span class="pl-k">public</span> <span class="pl-smi">Long</span> <span class="pl-en">getId</span>() {
        <span class="pl-k">return</span> id;
    }

    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getTitle</span>() {
        <span class="pl-k">return</span> title;
    }

    <span class="pl-k">public</span> <span class="pl-smi">Integer</span> <span class="pl-en">getDay</span>() {
        <span class="pl-k">return</span> day;
    }

    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getStartTime</span>() {
        <span class="pl-k">return</span> startTime;
    }

    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getEndTime</span>() {
        <span class="pl-k">return</span> endTime;
    }

}</pre></div>

<p>We will need to add a default constructor so that JPA can create the object, and we can remove <code>id</code> from the current constructor because the Id is now annotated as auto-generated (<code>@GeneratedValue</code>).  I've added in an Integer to represent the day of the week, and two Strings to model the start and end times.</p>

<p>We also need to add a repository for our persisted <code>Event</code>, we can do this with minimal code just by adding a new interface in the <code>timetable.model</code> package:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable.model</span>; 

<span class="pl-k">import</span> <span class="pl-smi">org.springframework.data.jpa.repository.JpaRepository</span>; 

<span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">EventRepository</span> <span class="pl-k">extends</span> <span class="pl-e">JpaRepository&lt;<span class="pl-smi">Event</span>, <span class="pl-smi">Long</span>&gt;</span> { 

}</pre></div>

<p>We will need to access the <code>EventRepository</code> from the <code>TimetableController</code>, so in that class we add a new member:</p>

<div class="highlight highlight-java"><pre>  @<span class="pl-smi">Autowired</span>   <span class="pl-smi">EventRepository</span> eventRepo;</pre></div>

<p>Then we can change the <code>TimetableController</code> <code>getEvents()</code> method to use the repository:</p>

<div class="highlight highlight-java"><pre>    @RequestMapping(method<span class="pl-k">=</span><span class="pl-smi">RequestMethod</span><span class="pl-c1"><span class="pl-k">.</span>GET</span>) 
    <span class="pl-k">public</span> @<span class="pl-smi">ResponseBody</span> <span class="pl-k">Collection&lt;<span class="pl-smi">Event</span>&gt;</span> getEvents(){ 
        <span class="pl-k">return</span> eventRepo<span class="pl-k">.</span>findAll(); 

    }</pre></div>

<p>We can initialise the repository with some default values in the <code>TimetableApplication</code> class with this method, which uses a lambda to create a <code>CommandLineRunner</code> class that gets run when Spring initialises:</p>

<div class="highlight highlight-java"><pre>    @<span class="pl-smi">Bean</span>
    <span class="pl-smi">CommandLineRunner</span> init(<span class="pl-smi">EventRepository</span> eventRepository) {
        <span class="pl-k">return</span> (evt)<span class="pl-k">-</span><span class="pl-k">&gt;</span> { 
            eventRepository<span class="pl-k">.</span>save( <span class="pl-k">new</span> <span class="pl-smi">Event</span>(<span class="pl-s"><span class="pl-pds">"</span>Yoga<span class="pl-pds">"</span></span>, 
                <span class="pl-c1">4</span>,
                <span class="pl-s"><span class="pl-pds">"</span>8pm<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>9pm<span class="pl-pds">"</span></span>));
            eventRepository<span class="pl-k">.</span>save(<span class="pl-k">new</span> <span class="pl-smi">Event</span>(<span class="pl-s"><span class="pl-pds">"</span>Boxercise<span class="pl-pds">"</span></span>, 
                <span class="pl-c1">5</span>,
                <span class="pl-s"><span class="pl-pds">"</span>7pm<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>8pm<span class="pl-pds">"</span></span>));
        };      
    }</pre></div>

<p>If we relaunch the application now, and use http GET on http://localhost:8080/timetable we should see something like this:</p>

<pre><code>[
  {
    "id": 1,
    "title": "Yoga",
    "day": 4,
    "startTime": "8pm",
    "endTime": "9pm"
  },
  {
    "id": 2,
    "title": "Boxercise",
    "day": 5,
    "startTime": "7pm",
    "endTime": "8pm"
  }
]
</code></pre>

<p>Full source code for this step is <a href="https://github.com/DebbieRoycroft/rest-tutorial/tree/step-3">here</a></p>

<h3>
<a id="step-4-adding-more-methods" class="anchor" href="#step-4-adding-more-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 4: Adding more methods</h3>

<p>On to adding the remainder of the API</p>

<p>Now we can add a method to implement GET for an individual Event. The id of the event is used as part of the URL (this is the path variable).</p>

<div class="highlight highlight-java"><pre>    @RequestMapping(value<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/event/{id}<span class="pl-pds">"</span></span>, method<span class="pl-k">=</span><span class="pl-smi">RequestMethod</span><span class="pl-c1"><span class="pl-k">.</span>GET</span>) 
    <span class="pl-k">public</span> @<span class="pl-smi">ResponseBody</span> <span class="pl-smi">Event</span> getEventById(@<span class="pl-smi">PathVariable</span> <span class="pl-smi">Long</span> id){ 
        <span class="pl-smi">Event</span> result <span class="pl-k">=</span> eventRepo<span class="pl-k">.</span>findOne(id); 
        <span class="pl-k">if</span> (result <span class="pl-k">==</span> <span class="pl-c1">null</span>){ 
            <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">EventNotFoundException</span>(id); 
        } 
        <span class="pl-k">return</span> result; 
    }</pre></div>

<p>If it can't find the event in the URL, it will throw an exception, this is annotated with <code>HttpStatus.NOT_FOUND</code> (404), which Spring will return for us if this exception is thrown</p>

<div class="highlight highlight-java"><pre>@ResponseStatus(<span class="pl-smi">HttpStatus</span><span class="pl-c1"><span class="pl-k">.</span>NOT_FOUND</span>) 
<span class="pl-k">class</span> <span class="pl-en">EventNotFoundException</span> <span class="pl-k">extends</span> <span class="pl-e">RuntimeException</span> { 
    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">long</span> serialVersionUID <span class="pl-k">=</span> <span class="pl-k">-</span><span class="pl-c1">9174199038443186877L</span>; 

    <span class="pl-k">public</span> <span class="pl-en">EventNotFoundException</span>(<span class="pl-smi">Long</span> <span class="pl-v">eventId</span>){ 
        <span class="pl-v">super</span>(<span class="pl-s"><span class="pl-pds">"</span>could not find event '<span class="pl-pds">"</span></span> <span class="pl-k">+</span> eventId <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>'.<span class="pl-pds">"</span></span>); 
    } 
}</pre></div>

<p>Now if we use GET on http://localhost:8080/timetable/event/1 should give us back the yoga class, http://localhost:8080/timetable/event/2 will give the boxercise class</p>

<p>Next, the POST method can add a new class to the repository. We generate the id automatically, and return the path to the generated event in the http header for the response. This path can be used as the URL for a subsequent request e.g. GET, DELETE</p>

<p>I'm using POST rather than PUT to implement the create, because I don't know the full URL for the new object (because the id is auto-generated). If the client were generating the id, then the PUT method might be more appropriate to use here</p>

<div class="highlight highlight-java"><pre>    @RequestMapping(value<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/event<span class="pl-pds">"</span></span>, method<span class="pl-k">=</span><span class="pl-smi">RequestMethod</span><span class="pl-c1"><span class="pl-k">.</span>POST</span>) 
    <span class="pl-k">public</span> <span class="pl-k">ResponseEntity&lt;?&gt;</span> addEvent(@<span class="pl-smi">RequestBody</span> <span class="pl-smi">Event</span> evt){ 
        <span class="pl-smi">Event</span> result <span class="pl-k">=</span> eventRepo<span class="pl-k">.</span>save(evt); 
        <span class="pl-smi">HttpHeaders</span> httpHeaders <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">HttpHeaders</span>(); 
        httpHeaders<span class="pl-k">.</span>setLocation(<span class="pl-smi">ServletUriComponentsBuilder</span> 
                .fromCurrentRequest()<span class="pl-k">.</span>path(<span class="pl-s"><span class="pl-pds">"</span>/{id}<span class="pl-pds">"</span></span>) 
                .buildAndExpand(result<span class="pl-k">.</span>getId())<span class="pl-k">.</span>toUri()); 
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-k">ResponseEntity&lt;&gt;</span>(result,httpHeaders, <span class="pl-smi">HttpStatus</span><span class="pl-c1"><span class="pl-k">.</span>CREATED</span>); 
    }</pre></div>

<p>Finally, the DELETE method will remove an event</p>

<div class="highlight highlight-java"><pre>    @RequestMapping(value<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/event/{id}<span class="pl-pds">"</span></span>, method<span class="pl-k">=</span><span class="pl-smi">RequestMethod</span><span class="pl-c1"><span class="pl-k">.</span>DELETE</span>) 
    <span class="pl-k">public</span> <span class="pl-k">void</span> deleteEvent(@<span class="pl-smi">PathVariable</span> <span class="pl-smi">Long</span> id){ 
        eventRepo<span class="pl-k">.</span>delete(id); 
    }</pre></div>

<p>Now we have all these interfaces implemented, we can test them manually using a tool like Postman, Chrome REST Console, or cURL. This is what the POST call looks like in Postman:
<img src="./screenshots/postman.png" alt=""></p>

<p>Full source code for this step is <a href="https://github.com/DebbieRoycroft/rest-tutorial/tree/step-4">here</a></p>

<h3>
<a id="step-5-automated-testing" class="anchor" href="#step-5-automated-testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 5: Automated testing</h3>

<p>Manual testing is something, but it would be good to get some automated tests.</p>

<p>Spring Boot bundles some unit testing libraries automatically. When we created the project we automatically got a <code>src/test/java</code> folder, with a <code>TimetableApplicationTests</code> in it.</p>

<p>In the same folder, we can create a new class <code>TimetableControllerTest</code> to test our rest controller</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable</span>; 
<span class="pl-c1">...</span> 

@RunWith(<span class="pl-smi">SpringJUnit4ClassRunner</span><span class="pl-k">.</span>class) 
@SpringApplicationConfiguration(classes <span class="pl-k">=</span> <span class="pl-smi">TimetableApplication</span><span class="pl-k">.</span>class) 
@<span class="pl-smi">WebAppConfiguration</span> 
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">TimetableControllerTest</span> { 
<span class="pl-c1">...</span>
    <span class="pl-k">private</span> <span class="pl-smi">MockMvc</span> mockMvc; </pre></div>

<p>We've told JUnit to user the SpringJUnit4ClassRunner to run the tests so it will be expecting to set up a Spring framework context</p>

<p><code>@SpringApplicationConfiguration</code> tells the framework where to find its configuration</p>

<p>The <code>@WebAppConfiguration</code> and <code>MockMvc</code> mean we won't be using the full tomcat server for these tests</p>

<div class="highlight highlight-java"><pre>    @<span class="pl-smi">Autowired</span> 
    <span class="pl-k">private</span> <span class="pl-smi">WebApplicationContext</span> webApplicationContext; 

    @<span class="pl-smi">Autowired</span> 
    <span class="pl-k">private</span> <span class="pl-smi">EventRepository</span> eventRepo; 

    @<span class="pl-smi">Before</span>  
    <span class="pl-k">public</span> <span class="pl-k">void</span> setup() throws <span class="pl-smi">Exception</span> { 
        <span class="pl-v">this</span><span class="pl-k">.</span>mockMvc <span class="pl-k">=</span> webAppContextSetup(webApplicationContext)<span class="pl-k">.</span>build(); 
        <span class="pl-v">this</span><span class="pl-k">.</span>eventRepo<span class="pl-k">.</span>deleteAllInBatch(); 
    } </pre></div>

<p>Before each test we make sure we have a clean set up with our <code>mockMvc</code> and also ensure that the in memory database is cleared down so it won't matter what order the tests are run in</p>

<p>The simplest thing to test is to check for the 404 not found response for an unknown event:</p>

<div class="highlight highlight-java"><pre>    @<span class="pl-smi">Test</span> 
    <span class="pl-k">public</span> <span class="pl-k">void</span> testEventNotFound() throws <span class="pl-smi">Exception</span> { 
        mockMvc<span class="pl-k">.</span>perform(get(<span class="pl-s"><span class="pl-pds">"</span>/timetable/event/5<span class="pl-pds">"</span></span>)) 
                .andExpect(status()<span class="pl-k">.</span>isNotFound()); 
    } </pre></div>

<p>This test checks for the GET on timetable/event/1 - making sure that we have an object in the database to be at that URL.</p>

<p>The expectations from the <code>mockMvc</code> show we're expecting to get back JSON from the API, test the status from the header, and test the body of the response with the <code>jsonPath</code> matcher.</p>

<div class="highlight highlight-java"><pre>   <span class="pl-k">private</span> <span class="pl-smi">MediaType</span> contentType <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">MediaType</span>(<span class="pl-smi">MediaType</span><span class="pl-c1"><span class="pl-k">.</span>APPLICATION_JSON</span><span class="pl-k">.</span>getType(), 
            <span class="pl-smi">MediaType</span><span class="pl-c1"><span class="pl-k">.</span>APPLICATION_JSON</span><span class="pl-k">.</span>getSubtype(), 
            <span class="pl-smi">Charset</span><span class="pl-k">.</span>forName(<span class="pl-s"><span class="pl-pds">"</span>utf8<span class="pl-pds">"</span></span>)); 

    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> readSingleEvent() throws <span class="pl-smi">Exception</span> {
        <span class="pl-smi">Event</span> evt <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>eventRepo<span class="pl-k">.</span>save(<span class="pl-k">new</span> <span class="pl-smi">Event</span>(<span class="pl-s"><span class="pl-pds">"</span>Yoga<span class="pl-pds">"</span></span>,
                <span class="pl-c1">4</span>, <span class="pl-s"><span class="pl-pds">"</span>8pm<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>9.30pm<span class="pl-pds">"</span></span>));
        mockMvc<span class="pl-k">.</span>perform(get(<span class="pl-s"><span class="pl-pds">"</span>/timetable/event/<span class="pl-pds">"</span></span> <span class="pl-k">+</span> evt<span class="pl-k">.</span>getId()))
                .andExpect(status()<span class="pl-k">.</span>isOk())
                .andExpect(content()<span class="pl-k">.</span>contentType(contentType))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.id<span class="pl-pds">"</span></span>, is(evt<span class="pl-k">.</span>getId()<span class="pl-k">.</span>intValue())))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.title<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>Yoga<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.day<span class="pl-pds">"</span></span>, is(<span class="pl-c1">4</span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.startTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>8pm<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.endTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>9.30pm<span class="pl-pds">"</span></span>)));
    }</pre></div>

<p>The test for GET /timetable/ is very similar, but it's expecting a collection back in the body- we can use matchers to test that too</p>

<div class="highlight highlight-java"><pre>    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> readEvents() throws <span class="pl-smi">Exception</span> {
        <span class="pl-smi">Event</span> evt1 <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>eventRepo<span class="pl-k">.</span>save( <span class="pl-k">new</span> <span class="pl-smi">Event</span>(<span class="pl-s"><span class="pl-pds">"</span>Yoga<span class="pl-pds">"</span></span>, 
                <span class="pl-c1">5</span>, <span class="pl-s"><span class="pl-pds">"</span>7pm<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>8pm<span class="pl-pds">"</span></span>));          
        <span class="pl-smi">Event</span> evt2 <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>eventRepo<span class="pl-k">.</span>save(<span class="pl-k">new</span> <span class="pl-smi">Event</span>(<span class="pl-s"><span class="pl-pds">"</span>Boxercise<span class="pl-pds">"</span></span>, 
                <span class="pl-c1">6</span>, <span class="pl-s"><span class="pl-pds">"</span>10am<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>11am<span class="pl-pds">"</span></span>));

        mockMvc<span class="pl-k">.</span>perform(get(<span class="pl-s"><span class="pl-pds">"</span>/timetable<span class="pl-pds">"</span></span>))
                .andExpect(status()<span class="pl-k">.</span>isOk())
                .andExpect(content()<span class="pl-k">.</span>contentType(contentType))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$<span class="pl-pds">"</span></span>, hasSize(<span class="pl-c1">2</span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[0].id<span class="pl-pds">"</span></span>, is(evt1<span class="pl-k">.</span>getId()<span class="pl-k">.</span>intValue())))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[0].title<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>Yoga<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[0].day<span class="pl-pds">"</span></span>, is(<span class="pl-c1">5</span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[0].startTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>7pm<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[0].endTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>8pm<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[1].id<span class="pl-pds">"</span></span>, is(evt2<span class="pl-k">.</span>getId()<span class="pl-k">.</span>intValue())))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[1].title<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>Boxercise<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[1].day<span class="pl-pds">"</span></span>, is(<span class="pl-c1">6</span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[1].startTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>10am<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$[1].endTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>11am<span class="pl-pds">"</span></span>)));
    }</pre></div>

<p>To test POST on /timetable/event/ we need a helper function to give us a JSON string to send. We also need to retrieve from the response from POST the path where the new Event was created, then we can use this as input to a GET request to check that it was saved as we expect</p>

<div class="highlight highlight-java"><pre>    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> createEvent() throws <span class="pl-smi">Exception</span> {
        <span class="pl-smi">String</span> eventJson <span class="pl-k">=</span> json( <span class="pl-k">new</span> <span class="pl-smi">Event</span>(
                <span class="pl-s"><span class="pl-pds">"</span>lane swimming<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>, <span class="pl-s"><span class="pl-pds">"</span>4pm<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>9pm<span class="pl-pds">"</span></span>));

        <span class="pl-smi">MvcResult</span> result <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>mockMvc<span class="pl-k">.</span>perform(post(<span class="pl-s"><span class="pl-pds">"</span>/timetable/event<span class="pl-pds">"</span></span>)
                .contentType(contentType)
                .content(eventJson))
                .andExpect(status()<span class="pl-k">.</span>isCreated())
                .andExpect(content()<span class="pl-k">.</span>contentType(contentType))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.title<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>lane swimming<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.day<span class="pl-pds">"</span></span>, is(<span class="pl-c1">3</span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.startTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>4pm<span class="pl-pds">"</span></span>)))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.endTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>9pm<span class="pl-pds">"</span></span>)))
                .andReturn();
        <span class="pl-smi">String</span> createdPath <span class="pl-k">=</span> result<span class="pl-k">.</span>getResponse()<span class="pl-k">.</span>getHeader(<span class="pl-s"><span class="pl-pds">"</span>Location<span class="pl-pds">"</span></span>);
        <span class="pl-v">this</span><span class="pl-k">.</span>mockMvc<span class="pl-k">.</span>perform(get(createdPath))
            .andExpect(status()<span class="pl-k">.</span>isOk())
            .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.title<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>lane swimming<span class="pl-pds">"</span></span>)));
    }

    <span class="pl-k">protected</span> <span class="pl-smi">String</span> json(<span class="pl-smi">Object</span> o) throws <span class="pl-smi">IOException</span> { 
        <span class="pl-smi">ObjectMapper</span> mapper <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ObjectMapper</span>(); 
        mapper<span class="pl-k">.</span>setSerializationInclusion(<span class="pl-smi">JsonInclude</span><span class="pl-k">.</span><span class="pl-smi">Include</span><span class="pl-c1"><span class="pl-k">.</span>NON_NULL</span>); 
        <span class="pl-k">return</span> mapper<span class="pl-k">.</span>writeValueAsString(o); 
    } </pre></div>

<p>Finally, the test for DELETE is similar- POST to create an Event, and make sure we know the URL for it, a quick GET to be sure it was there, then after DELETE check that we get 404 on a second GET request.</p>

<div class="highlight highlight-java"><pre>    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> testDeleteEvent() throws <span class="pl-smi">Exception</span> {
        <span class="pl-smi">String</span> eventJson <span class="pl-k">=</span> json( <span class="pl-k">new</span> <span class="pl-smi">Event</span>(
                <span class="pl-s"><span class="pl-pds">"</span>Pilates<span class="pl-pds">"</span></span>, <span class="pl-c1">7</span>, <span class="pl-s"><span class="pl-pds">"</span>9am<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>11am<span class="pl-pds">"</span></span>));

        <span class="pl-smi">MvcResult</span> result <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>mockMvc<span class="pl-k">.</span>perform(post(<span class="pl-s"><span class="pl-pds">"</span>/timetable/event<span class="pl-pds">"</span></span>)
                .contentType(contentType)
                .content(eventJson))
                .andExpect(status()<span class="pl-k">.</span>isCreated())
                .andExpect(content()<span class="pl-k">.</span>contentType(contentType))
                .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.title<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>Pilates<span class="pl-pds">"</span></span>)))
                .andReturn();
        <span class="pl-smi">String</span> createdLocation <span class="pl-k">=</span> result<span class="pl-k">.</span>getResponse()<span class="pl-k">.</span>getHeader(<span class="pl-s"><span class="pl-pds">"</span>Location<span class="pl-pds">"</span></span>);
        <span class="pl-v">this</span><span class="pl-k">.</span>mockMvc<span class="pl-k">.</span>perform(get(createdLocation))
            .andExpect(status()<span class="pl-k">.</span>isOk())
            .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.title<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>Pilates<span class="pl-pds">"</span></span>)))
            .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.day<span class="pl-pds">"</span></span>, is(<span class="pl-c1">7</span>)))
            .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.startTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>9am<span class="pl-pds">"</span></span>)))
            .andExpect(jsonPath(<span class="pl-s"><span class="pl-pds">"</span>$.endTime<span class="pl-pds">"</span></span>, is(<span class="pl-s"><span class="pl-pds">"</span>11am<span class="pl-pds">"</span></span>)));

        <span class="pl-v">this</span><span class="pl-k">.</span>mockMvc<span class="pl-k">.</span>perform(delete(createdLocation))
        .andExpect(status()<span class="pl-k">.</span>isOk());

        <span class="pl-v">this</span><span class="pl-k">.</span>mockMvc<span class="pl-k">.</span>perform(get(createdLocation))
        .andExpect(status()<span class="pl-k">.</span>isNotFound());
    }</pre></div>

<p>We also need an additional dependency in the maven <code>pom.xml</code>. Spring included <code>spring-boot-starter-test</code> automatically, but the <code>jsonPath</code> matcher requires an extra artifact:</p>

<div class="highlight highlight-xml"><pre>  &lt;<span class="pl-ent">dependency</span>&gt; 
    &lt;<span class="pl-ent">groupId</span>&gt;com.jayway.jsonpath&lt;/<span class="pl-ent">groupId</span>&gt; 
    &lt;<span class="pl-ent">artifactId</span>&gt;json-path-assert&lt;/<span class="pl-ent">artifactId</span>&gt; 
    &lt;<span class="pl-ent">version</span>&gt;0.8.1&lt;/<span class="pl-ent">version</span>&gt; 
    &lt;<span class="pl-ent">scope</span>&gt;test&lt;/<span class="pl-ent">scope</span>&gt; 
  &lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<p>You can run the tests either as JUnit tests in Eclipse, or via the Maven build</p>

<p>Full source code for this step is <a href="https://github.com/DebbieRoycroft/rest-tutorial/tree/step-5">here</a></p>

<h3>
<a id="step-6-adding-a-java-rest-client" class="anchor" href="#step-6-adding-a-java-rest-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 6: Adding a Java REST client</h3>

<p>Next we'll add a client for this API.  Again Spring provides libraries bundled that give us REST client capabilities.  In order to be able to see what this client is doing, and to show some more of Spring's framework, this part brings in the MVC functionality to give a web GUI client as well.</p>

<p>Create a new project for this <code>timetable_mvc_client</code>, again using Spring Boot as we did in step 1. This time we'll use the web and thymeleaf options only.  Thymeleaf is a template engine that lets us produce html pages and have sections substituted with content from the application.</p>

<p>Spring Boot should have generated us a class with a main method as a starter, just like in the previous project:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable_mvc_client</span>; 

<span class="pl-k">import</span> <span class="pl-smi">org.springframework.boot.SpringApplication</span>; 
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.boot.autoconfigure.SpringBootApplication</span>; 

@<span class="pl-smi">SpringBootApplication</span> 
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">TimetableMvcClientApplication</span> { 

  <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) { 
    <span class="pl-smi">SpringApplication</span><span class="pl-k">.</span>run(<span class="pl-smi">TimetableMvcClientApplication</span><span class="pl-k">.</span>class, args); 
  } 
} </pre></div>

<p>To implement our web pages, we need a controller or two. I've added a new package timetable_mvc_client.controllers to hold them.  In terms of annotations they look very similar to the controller in the REST server, but they return content differently, using on to Spring's MVC view handling to provide the webpage content.</p>

<p>I've created two controller classes, one for each of two pages.  The first one is for the main page 'timetable' which will show all the contents from a call made to the other application's /timetable interface.</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable_mvc_client.controllers</span>;

<span class="pl-k">import</span> <span class="pl-smi">java.util.Arrays</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.stereotype.Controller</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.ui.Model</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.web.bind.annotation.RequestMapping</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.web.client.RestTemplate</span>;

<span class="pl-k">import</span> <span class="pl-smi">timetable_mvc_client.model.Timetable</span>;
<span class="pl-k">import</span> <span class="pl-smi">timetable_mvc_client.model.TimetableClass</span>;

@<span class="pl-smi">Controller</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">TimetableController</span> {

    <span class="pl-k">@RequestMapping</span>(<span class="pl-s"><span class="pl-pds">"</span>/timetable<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">showFullTimetable</span>(<span class="pl-smi">Model</span> <span class="pl-v">model</span>){
        model<span class="pl-k">.</span>addAttribute(<span class="pl-s"><span class="pl-pds">"</span>timetable<span class="pl-pds">"</span></span>, <span class="pl-v">this</span><span class="pl-k">.</span>getFullTimetable());
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>full_timetable<span class="pl-pds">"</span></span>;
    }

    <span class="pl-k">private</span> <span class="pl-smi">Timetable</span> <span class="pl-en">getFullTimetable</span>() {
        <span class="pl-smi">RestTemplate</span> restTemplate <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">RestTemplate</span>();
        <span class="pl-k">TimetableClass</span>[] classes <span class="pl-k">=</span> restTemplate<span class="pl-k">.</span>getForObject( 
                <span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080/timetable<span class="pl-pds">"</span></span>, 
                <span class="pl-k">TimetableClass</span>[]<span class="pl-k">.</span>class);
        <span class="pl-smi">Timetable</span> fullTimetable <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Timetable</span>();
        fullTimetable<span class="pl-k">.</span>setClasses(<span class="pl-smi">Arrays</span><span class="pl-k">.</span>asList(classes));
        <span class="pl-k">return</span> fullTimetable;
    }
}</pre></div>

<p><code>showFullTimetable</code> will take all GET requests to /timetable (without a <code>method</code> property the default is GET) and puts some data into the <code>Model</code> used by the Thymeleaf template in the html view.  It uses <code>getFullTimetable</code> to make the REST call to the other webservice, mapping the response on to its own data model classes.  The <code>TimetableClass</code> has the same data structure as the <code>Event</code> does in the other project. 
Here's the <code>TimetableClass</code>:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable_mvc_client.model</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.fasterxml.jackson.annotation.JsonIgnoreProperties</span>;

@JsonIgnoreProperties(ignoreUnknown <span class="pl-k">=</span> <span class="pl-c1">true</span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">TimetableClass</span> {
    <span class="pl-k">private</span> <span class="pl-smi">String</span> title;
    <span class="pl-k">private</span> <span class="pl-smi">Integer</span> day;
    <span class="pl-k">private</span> <span class="pl-smi">String</span> startTime;
    <span class="pl-k">private</span> <span class="pl-smi">String</span> endTime;

    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getTitle</span>() {
        <span class="pl-k">return</span> title;
    }
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setTitle</span>(<span class="pl-smi">String</span> <span class="pl-v">title</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>title <span class="pl-k">=</span> title;
    }
    <span class="pl-k">public</span> <span class="pl-smi">Integer</span> <span class="pl-en">getDay</span>() {
        <span class="pl-k">return</span> day;
    }
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setDay</span>(<span class="pl-smi">Integer</span> <span class="pl-v">day</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>day <span class="pl-k">=</span> day;
    }
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getStartTime</span>() {
        <span class="pl-k">return</span> startTime;
    }
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setStartTime</span>(<span class="pl-smi">String</span> <span class="pl-v">startTime</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>startTime <span class="pl-k">=</span> startTime;
    }
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getEndTime</span>() {
        <span class="pl-k">return</span> endTime;
    }
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setEndTime</span>(<span class="pl-smi">String</span> <span class="pl-v">endTime</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>endTime <span class="pl-k">=</span> endTime;
    }
}</pre></div>

<p>This is in the <code>timetable_mvc_client.model</code> package.  It's annotated with <code>@JsonIgnoreProperties(ignoreUnknown = true)</code> which means that if the server were to return a JSON object with properties this class doesn't map it will ignore them.  This allows the client to be more loosely coupled to the server, it doesn't have to implement every change made to the server's interface.  The other class in the <code>model</code> package is <code>Timetable</code>.  It is just a container for <code>TimetableClass</code> used by the view:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable_mvc_client.model</span>;

<span class="pl-k">import</span> <span class="pl-smi">java.util.List</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Timetable</span> {
    <span class="pl-k">private</span> <span class="pl-k">List&lt;<span class="pl-smi">TimetableClass</span>&gt;</span> classes;

    <span class="pl-k">public</span> <span class="pl-k">List&lt;<span class="pl-smi">TimetableClass</span>&gt;</span> <span class="pl-en">getClasses</span>() {
        <span class="pl-k">return</span> classes;
    }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setClasses</span>(<span class="pl-k">List&lt;<span class="pl-smi">TimetableClass</span>&gt;</span> <span class="pl-v">classes</span>) {
        <span class="pl-v">this</span><span class="pl-k">.</span>classes <span class="pl-k">=</span> classes;
    }
}</pre></div>

<p>This is the view for the front page <code>full_timetable.html</code> in the <code>src/main/resources/templates</code> folder: </p>

<div class="highlight highlight-html"><pre>&lt;!DOCTYPE html&gt;

&lt;<span class="pl-ent">html</span> <span class="pl-e">xmlns</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/1999/xhtml<span class="pl-pds">"</span></span>
      <span class="pl-e">xmlns:th</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.thymeleaf.org<span class="pl-pds">"</span></span>&gt;

  &lt;<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">title</span>&gt;Gym Timetable&lt;/<span class="pl-ent">title</span>&gt;
    &lt;<span class="pl-ent">meta</span> <span class="pl-e">http-equiv</span>=<span class="pl-s"><span class="pl-pds">"</span>Content-Type<span class="pl-pds">"</span></span> <span class="pl-e">content</span>=<span class="pl-s"><span class="pl-pds">"</span>text/html; charset=UTF-8<span class="pl-pds">"</span></span> /&gt;
  &lt;/<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">body</span>&gt;
    &lt;<span class="pl-ent">h1</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{title.timetableevents}<span class="pl-pds">"</span></span>&gt;Timetable of Events&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">table</span>&gt;
      &lt;<span class="pl-ent">tr</span>&gt;
        &lt;<span class="pl-ent">th</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{timetable.header.class}<span class="pl-pds">"</span></span>&gt;CLASS&lt;/<span class="pl-ent">th</span>&gt;
        &lt;<span class="pl-ent">th</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{timetable.header.day}<span class="pl-pds">"</span></span>&gt;DAY&lt;/<span class="pl-ent">th</span>&gt;
        &lt;<span class="pl-ent">th</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{timetable.header.startTime}<span class="pl-pds">"</span></span>&gt;START TIME&lt;/<span class="pl-ent">th</span>&gt;
        &lt;<span class="pl-ent">th</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{timetable.header.endTime}<span class="pl-pds">"</span></span>&gt;END TIME&lt;/<span class="pl-ent">th</span>&gt;
      &lt;/<span class="pl-ent">tr</span>&gt;
      &lt;<span class="pl-ent">tr</span> <span class="pl-e">th:each</span>=<span class="pl-s"><span class="pl-pds">"</span>gymClass : ${timetable.classes}<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">td</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>${gymClass.title}<span class="pl-pds">"</span></span>&gt;A class&lt;/<span class="pl-ent">td</span>&gt;
        &lt;<span class="pl-ent">td</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>${gymClass.day} != null ? #{day__${gymClass.day}__} : ''<span class="pl-pds">"</span></span>&gt;day&lt;/<span class="pl-ent">td</span>&gt;
        &lt;<span class="pl-ent">td</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>${gymClass.startTime}<span class="pl-pds">"</span></span>&gt;start&lt;/<span class="pl-ent">td</span>&gt;
        &lt;<span class="pl-ent">td</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>${gymClass.endTime}<span class="pl-pds">"</span></span>&gt;end&lt;/<span class="pl-ent">td</span>&gt;
      &lt;/<span class="pl-ent">tr</span>&gt;
    &lt;/<span class="pl-ent">table</span>&gt;
    &lt;<span class="pl-ent">a</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>/createClass<span class="pl-pds">"</span></span> <span class="pl-e">th:href</span>=<span class="pl-s"><span class="pl-pds">"</span>@{/class}<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{link.createNewClass}<span class="pl-pds">"</span></span>&gt;create&lt;/<span class="pl-ent">a</span>&gt;
    &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p>The <code>th</code> markers are the Thymeleaf templates. In this case the '#' markers are all resolved to message keys in a messages.properties file (this can be localised e.g. messages_fr_FR.properties to give a French translation of the page). The '$' markers are variables from the model.</p>

<p>When the application is run it gives a page something like this:</p>

<p>The second page, is there to create a new class, and uses the POST method on Event in the original webservice.  Here is the controller for the class page:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">package</span> <span class="pl-smi">timetable_mvc_client.controllers</span>;

<span class="pl-k">import</span> <span class="pl-smi">org.springframework.http.ResponseEntity</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.stereotype.Controller</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.ui.Model</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.web.bind.annotation.RequestMapping</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.web.bind.annotation.RequestMethod</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.springframework.web.client.RestTemplate</span>;

<span class="pl-k">import</span> <span class="pl-smi">timetable_mvc_client.model.TimetableClass</span>;

@<span class="pl-smi">Controller</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ClassController</span> {
    <span class="pl-k">@RequestMapping</span>(<span class="pl-s"><span class="pl-pds">"</span>/class<span class="pl-pds">"</span></span>)
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">showCreateClassForm</span>(<span class="pl-smi">Model</span> <span class="pl-v">model</span>){
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>new_class<span class="pl-pds">"</span></span>;
    }

    <span class="pl-k">@RequestMapping</span>(<span class="pl-c1">value</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/class<span class="pl-pds">"</span></span>, <span class="pl-c1">method</span><span class="pl-k">=</span><span class="pl-smi">RequestMethod</span><span class="pl-c1"><span class="pl-k">.</span>POST</span>)
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">createNewClass</span>(<span class="pl-smi">TimetableClass</span> <span class="pl-v">newClass</span>){
        <span class="pl-smi">RestTemplate</span> restTemplate <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">RestTemplate</span>();
        <span class="pl-k">ResponseEntity&lt;<span class="pl-smi">TimetableClass</span>&gt;</span> response <span class="pl-k">=</span> 
                restTemplate<span class="pl-k">.</span>postForEntity(
                        <span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080/timetable/event<span class="pl-pds">"</span></span>, 
                        newClass, <span class="pl-smi">TimetableClass</span><span class="pl-k">.</span>class);
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>redirect:timetable<span class="pl-pds">"</span></span>;
    }
}</pre></div>

<p>The first method just gets the form page sent back to the browser for the user to fill in, the second is invoked when the user submits the form (POST method) and will in turn call POST for timetable/event in the other webservice, using the data passed in from the form.</p>

<p>This is the view (<code>new_class.html</code> in src/main/resources):</p>

<div class="highlight highlight-html"><pre>&lt;!DOCTYPE html&gt;

&lt;<span class="pl-ent">html</span> <span class="pl-e">xmlns</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/1999/xhtml<span class="pl-pds">"</span></span>
      <span class="pl-e">xmlns:th</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.thymeleaf.org<span class="pl-pds">"</span></span>&gt;

  &lt;<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">title</span>&gt;New Class&lt;/<span class="pl-ent">title</span>&gt;
    &lt;<span class="pl-ent">meta</span> <span class="pl-e">http-equiv</span>=<span class="pl-s"><span class="pl-pds">"</span>Content-Type<span class="pl-pds">"</span></span> <span class="pl-e">content</span>=<span class="pl-s"><span class="pl-pds">"</span>text/html; charset=UTF-8<span class="pl-pds">"</span></span> /&gt;
  &lt;/<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">body</span>&gt;
    &lt;<span class="pl-ent">h1</span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{title.createNewClass}<span class="pl-pds">"</span></span>&gt;New Class&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">form</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>new-class-form<span class="pl-pds">"</span></span> <span class="pl-e">role</span>=<span class="pl-s"><span class="pl-pds">"</span>form<span class="pl-pds">"</span></span> <span class="pl-e">th:action</span>=<span class="pl-s"><span class="pl-pds">"</span>@{/class}<span class="pl-pds">"</span></span> <span class="pl-e">method</span>=<span class="pl-s"><span class="pl-pds">"</span>post<span class="pl-pds">"</span></span> <span class="pl-e">th:object</span>=<span class="pl-s"><span class="pl-pds">"</span>${TimetableClass}<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">label</span> <span class="pl-e">for</span>=<span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{newclass.title}<span class="pl-pds">"</span></span>&gt;title&lt;/<span class="pl-ent">label</span>&gt;
        &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">label</span> <span class="pl-e">for</span>=<span class="pl-s"><span class="pl-pds">"</span>day<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{newclass.day}<span class="pl-pds">"</span></span>&gt;day&lt;/<span class="pl-ent">label</span>&gt; 
        &lt;<span class="pl-ent">select</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>day<span class="pl-pds">"</span></span>&gt;
            &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{day1}<span class="pl-pds">"</span></span>&gt;Mon&lt;/<span class="pl-ent">option</span>&gt;
            &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{day2}<span class="pl-pds">"</span></span>&gt;Tue&lt;/<span class="pl-ent">option</span>&gt;
            &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{day3}<span class="pl-pds">"</span></span>&gt;Wed&lt;/<span class="pl-ent">option</span>&gt;
            &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{day4}<span class="pl-pds">"</span></span>&gt;Thu&lt;/<span class="pl-ent">option</span>&gt;
            &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>5<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{day5}<span class="pl-pds">"</span></span>&gt;Fri&lt;/<span class="pl-ent">option</span>&gt;
            &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>6<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{day6}<span class="pl-pds">"</span></span>&gt;Sat&lt;/<span class="pl-ent">option</span>&gt;
            &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>7<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{day7}<span class="pl-pds">"</span></span>&gt;Sun&lt;/<span class="pl-ent">option</span>&gt;
        &lt;/<span class="pl-ent">select</span>&gt;
        &lt;<span class="pl-ent">label</span> <span class="pl-e">for</span>=<span class="pl-s"><span class="pl-pds">"</span>startTime<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{newclass.startTime}<span class="pl-pds">"</span></span>&gt;startTime&lt;/<span class="pl-ent">label</span>&gt;
        &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>startTime<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>startTime<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">label</span> <span class="pl-e">for</span>=<span class="pl-s"><span class="pl-pds">"</span>endTime<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{newclass.endTime}<span class="pl-pds">"</span></span>&gt;startTime&lt;/<span class="pl-ent">label</span>&gt;
        &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>endTime<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>endTime<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">div</span>&gt;
            &lt;<span class="pl-ent">button</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>submit<span class="pl-pds">"</span></span>&gt;Save&lt;/<span class="pl-ent">button</span>&gt;
        &lt;/<span class="pl-ent">div</span>&gt;
    &lt;/<span class="pl-ent">form</span>&gt; 
    &lt;<span class="pl-ent">a</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>/timetable<span class="pl-pds">"</span></span> <span class="pl-e">th:href</span>=<span class="pl-s"><span class="pl-pds">"</span>@{/timetable}<span class="pl-pds">"</span></span> <span class="pl-e">th:text</span>=<span class="pl-s"><span class="pl-pds">"</span>#{link.fullTimetable}<span class="pl-pds">"</span></span>&gt;back&lt;/<span class="pl-ent">a</span>&gt;
    &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p>It's page looks something like this:</p>

<p>The labels and static text for both view pages come from <code>messages.properties</code> in <code>src/main/resources</code>:</p>

<pre><code>title.timetableevents=What's on 
timetable.header.class=Class 
timetable.header.day=Day 
timetable.header.startTime=Start Time 
timetable.header.endTime=End Time 
link.createNewClass=Create New Class 
title.createNewClass=New Class 
link.fullTimetable=Show Full Timetable 
newclass.title=Class title: 
newclass.day=Day: 
newclass.startTime=Start: 
newclass.endTime=End: 
day1=Monday 
day2=Tuesday 
day3=Wednesday 
day4=Thursday 
day5=Friday 
day6=Saturday 
day7=Sunday
</code></pre>

<p>Finally, before running up the application, if it's going to run on the same host machine as the timetable rest server, we'll need to make sure that the tomcat server inside the mvc client starts on a different port. This can be set as an argument at runtime, or we can set it up in application.properties (also in <code>src/main/resources</code>)</p>

<pre><code>server.port = 9080
</code></pre>

<p>Make sure both applications are running.  Now you should be able to go to http://localhost:9080/timetable in your browser and see the initial contents of the database in the first page, follow the link to create a new class, submit the form and then be taken back to the first page and see the updated results.</p>

<p>Full source code for this step is <a href="https://github.com/DebbieRoycroft/rest-tutorial/tree/step-6">here</a></p>

<p>We've managed to put together two applications now, both are very simple, we don't have anything in the way of styling in the GUI, and we don't have a very advanced REST interface, but it should illustrate the basic parts needed for both a server and a client to be able to use a REST api.</p>

<p>Spring Boot has plenty more to offer for REST apis:</p>

<ul>
<li> Spring Security can be added to control access to your interfaces or UIs</li>
<li> Spring HATEOAS has methods for adding hyperlinks to your REST interfaces to decouple the client and server implementations even further</li>
<li> Spring Boot bundles Swagger which can be used to provide documentation for your REST interface generated from your code
There's lots more information and tutorials at the <a href="http://projects.spring.io/spring-boot/">Spring Boot home page</a>.  If you have the STS plugin in eclipse, the Spring dashboard takes you to this page and you can download the tutorial examples into your IDE. </li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/DebbieRoycroft/rest-tutorial">rest-tutorial</a> is maintained by <a href="https://github.com/DebbieRoycroft">DebbieRoycroft</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

